(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-206c74ea"],{1511:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container py-5"},[r("UserProfileCard",{attrs:{"user-profile":e.userProfile,followings:e.followings,"initial-followed":e.isFollowed}}),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4"},[r("UserFollowingCard",{attrs:{"user-followings":e.followings}}),r("UserFollowerCard",{attrs:{"user-followers":e.followers}})],1),r("div",{staticClass:"col-md-8"},[r("UserCommentsCard",{attrs:{"user-comments":e.userComments}}),r("UserFavoritedRestaurantsCard",{attrs:{"favorited-comments":e.favoritedRestaurants}})],1)])],1)},a=[],o=r("1da1"),n=r("5530"),i=(r("96cf"),r("b0c0"),r("4de4"),r("d3b7"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card mb-3"},[r("div",{staticClass:"row no-gutters"},[r("div",{staticClass:"col-md-4"},[r("img",{attrs:{src:e.userProfile.image,width:"300px",height:"300px"}})]),r("div",{staticClass:"col-md-8"},[r("div",{staticClass:"card-body"},[r("h5",{staticClass:"card-title"},[e._v(e._s(e.userProfile.name))]),r("p",{staticClass:"card-text"},[e._v(" "+e._s(e.userProfile.email)+" ")]),r("ul",{staticClass:"list-unstyled list-inline"},[r("li",[r("strong",[e._v(e._s(e.userProfile.commentsLength))]),e._v(" 已評論餐廳 ")]),r("li",[r("strong",[e._v(e._s(e.userProfile.favoritedRestaurantsLength))]),e._v(" 收藏的餐廳 ")]),r("li",[r("strong",[e._v(e._s(e.userProfile.followingsLength))]),e._v(" followings (追蹤者) ")]),r("li",[r("strong",[e._v(e._s(e.userProfile.followersLength))]),e._v(" followers (追隨者) ")])]),r("p"),r("form",{staticStyle:{display:"contents"},attrs:{action:"/following/3?_method=DELETE",method:"POST"}},[e.isFollowed?r("button",{staticClass:"btn btn-danger",attrs:{type:"submit"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.deleteFollowed(e.userProfile.id)}}},[e._v(" 取消追蹤 ")]):r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.addFollowed(e.userProfile.id)}}},[e._v(" 追蹤 ")]),r("router-link",{staticClass:"edit",attrs:{to:{name:"admin-user-edit",params:{id:e.userProfile.id}}}},[e._v("修改個人資料")])],1),r("p")])])])])}),l=[],c=r("4cce"),u=r("6b27"),d={props:{userProfile:{type:Object,required:!0},initialFollowed:{type:Boolean,required:!0}},data:function(){return{isFollowed:this.initialFollowed}},watch:{isFollowed:function(e){this.isFollowed=e}},methods:{addFollowed:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c["a"].followingUsers({userId:e});case 3:if(s=r.sent,a=s.data,console.log(a),"error"!==a.status){r.next=8;break}throw new Error(a.message);case 8:e===t.userProfile.id&&(t.isFollowed=!0),u["a"].fire({icon:"success",title:"成功追蹤！"}),r.next=16;break;case 12:r.prev=12,r.t0=r["catch"](0),console.log(r.t0),u["a"].fire({icon:"error",title:"無法成功追蹤！"});case 16:case"end":return r.stop()}}),r,null,[[0,12]])})))()},deleteFollowed:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c["a"].notFollowingUsers({userId:e});case 3:if(s=r.sent,a=s.data,"error"!==a.status){r.next=7;break}throw new Error(a.message);case 7:e===t.userProfile.id&&(t.isFollowed=!1),u["a"].fire({icon:"success",title:"已成功取消追蹤！"}),r.next=15;break;case 11:r.prev=11,r.t0=r["catch"](0),console.log(r.t0),u["a"].fire({icon:"error",title:"無法成功取消追蹤！"});case 15:case"end":return r.stop()}}),r,null,[[0,11]])})))()}}},f=d,m=(r("8ad0"),r("2877")),v=Object(m["a"])(f,i,l,!1,null,"8896f0a2",null),g=v.exports,w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[e._v(e._s(e.userFollowings.length))]),e._v(" followings (追蹤者) ")]),r("div",{staticClass:"card-body"},e._l(e.userFollowings,(function(e){return r("a",{key:e.id,attrs:{href:"/users/2"}},[r("img",{staticClass:"avatar mr-1",attrs:{src:e.image,width:"60",height:"60"}})])})),0)])},h=[],p={props:{userFollowings:{type:Array,required:!0}}},C=p,_=(r("80a3"),Object(m["a"])(C,w,h,!1,null,"a716f5d8",null)),b=_.exports,F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[e._v(e._s(e.userFollowers.length))]),e._v(" followers (追蹤者) ")]),r("div",{staticClass:"card-body"},e._l(e.userFollowers,(function(e){return r("a",{key:e.id,attrs:{href:"/users/2"}},[r("img",{staticClass:"avatar mr-1",attrs:{src:e.image,width:"60",height:"60"}})])})),0)])},y=[],P={props:{userFollowers:{type:Array,required:!0}}},x=P,k=Object(m["a"])(x,F,y,!1,null,null,null),R=k.exports,U=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[e._v(e._s(e.userComments.length))]),e._v(" 已評論餐廳 ")]),r("div",{staticClass:"card-body"},e._l(e.userComments,(function(e){return r("a",{key:e.id,attrs:{href:"/restaurants/1"}},[r("img",{staticClass:"avatar",attrs:{src:e.Restaurant.image,width:"60",height:"60"}})])})),0)])},O=[],j={props:{userComments:{type:Array,required:!0}}},L=j,E=Object(m["a"])(L,U,O,!1,null,null,null),$=E.exports,q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[e._v(e._s(e.favoritedComments.length))]),e._v(" 收藏的餐廳 ")]),r("div",{staticClass:"card-body"},e._l(e.favoritedComments,(function(e){return r("a",{key:e.id,attrs:{href:"/restaurants/2"}},[r("img",{staticClass:"avatar",attrs:{src:e.image,width:"60",height:"60"}})])})),0)])},A=[],D={props:{favoritedComments:{type:Array,required:!0}}},I=D,J=Object(m["a"])(I,q,A,!1,null,null,null),S=J.exports,T=r("2f62"),B={components:{UserProfileCard:g,UserFollowingCard:b,UserFollowerCard:R,UserCommentsCard:$,UserFavoritedRestaurantsCard:S},data:function(){return{userProfile:{id:0,image:"",name:"",email:"",followingsLength:0,followersLength:0,commentsLength:0,favoritedRestaurantsLength:0},userComments:[],favoritedRestaurants:[],followings:[],followers:[],isFollowed:!1}},computed:Object(n["a"])({},Object(T["b"])(["currentUser"])),created:function(){var e=this.$route.params.id;this.fetchUser(e)},methods:{fetchUser:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var s,a,o,i,l,d,f,m,v,g,w,h;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c["a"].get({userId:e});case 3:if(s=r.sent,a=s.data,"error"!==a.status){r.next=7;break}throw new Error(a.message);case 7:o=a.profile,i=a.isFollowed,l=o.id,d=o.name,f=o.email,m=o.image,v=o.Followings,g=o.Followers,w=o.Comments,h=o.FavoritedRestaurants,t.userProfile=Object(n["a"])(Object(n["a"])({},t.userProfile),{},{id:l,image:m,name:d,email:f,followingsLength:v.length,followersLength:g.length,commentsLength:w.length,favoritedRestaurantsLength:h.length}),t.userComments=w.filter((function(e){return e.Restaurant})),t.favoritedRestaurants=h,t.followings=v,t.followers=g,t.isFollowed=i,r.next=20;break;case 16:r.prev=16,r.t0=r["catch"](0),console.log(r.t0),u["a"].fire({icon:"error",title:"無法成功載入使用者！"});case 20:case"end":return r.stop()}}),r,null,[[0,16]])})))()}},beforeRouteUpdate:function(e,t,r){var s=e.params.id;this.fetchUser(s),r()}},z=B,G=Object(m["a"])(z,s,a,!1,null,null,null);t["default"]=G.exports},"3aff":function(e,t,r){},"80a3":function(e,t,r){"use strict";r("9b99")},"8ad0":function(e,t,r){"use strict";r("3aff")},"9b99":function(e,t,r){}}]);
//# sourceMappingURL=chunk-206c74ea.75199d5a.js.map